<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>待辦事項</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #000; padding: 5px; text-align: center; }
  </style>
</head>
<body>
  <h1>待辦事項提醒器</h1>
  <label>日期: <input type="date" id="todoDate"></label>
  <label>時間: <input type="time" id="todoTime"></label>
  <label>事項名稱: <input type="text" id="todoName"></label>
  <button onclick="addTodo()">新增</button>

  <h2>待辦清單</h2>
  <table id="todoTable">
    <thead>
      <tr><th>日期</th><th>時間</th><th>名稱</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const API_URL = "script.google.com/macros/s/AKfycbx9_LtSOGcOURaNrTd47LN8wN9jBKTuN7seY921RQs/dev"; // <- 改成你的 Apps Script URL

    async function loadTodos() {
      const res = await fetch(API_URL);
      const todos = await res.json();

      const tbody = document.querySelector("#todoTable tbody");
      tbody.innerHTML = "";

      todos.sort((a,b) => (a.date + a.time).localeCompare(b.date + b.time));

      todos.forEach(todo => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${todo.date}</td><td>${todo.time}</td><td>${todo.name}</td>`;
        tbody.appendChild(row);
      });
    }

    async function addTodo() {
      const date = document.getElementById("todoDate").value;
      const time = document.getElementById("todoTime").value;
      const name = document.getElementById("todoName").value.trim();

      if (!date || !time || !name) { alert("請完整填寫"); return; }

      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ date, time, name })
      });

      document.getElementById("todoDate").value = "";
      document.getElementById("todoTime").value = "";
      document.getElementById("todoName").value = "";

      loadTodos(); // 更新表格
    }

    window.onload = loadTodos;
  </script>
</body>
</html>


